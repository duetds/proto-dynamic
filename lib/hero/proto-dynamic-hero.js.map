{"version":3,"file":"proto-dynamic-hero.js","sourceRoot":"","sources":["../../src/hero/proto-dynamic-hero.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, LitElement, nothing } from \"lit\"\nimport { customElement, property } from \"lit/decorators.js\"\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\"\nimport { getLinkUrl, isUrlExternal, renderRichText } from \"../utils/helper-functions\"\n\nexport interface RichTextNode {\n  nodeType?: string\n  value?: string\n  data?: object\n  content?: RichTextNode[]\n}\n\nexport interface EntryFields {\n  heading?: string\n  icon?: string\n  body?: { content: RichTextNode[] }\n}\n\nexport interface DynamicModal extends CustomEvent {\n  detail: {\n    entryId: string\n    fields: EntryFields\n  }\n}\n\nexport interface DuetModal extends HTMLElement {\n  show: () => void\n  hide: () => void\n}\n\nexport interface ProtoButtonHandler {\n  buttonId: string\n  url?: string\n  clickHandler?: () => void\n}\n\nexport interface ButtonResource {\n  fields: {\n    key: string\n    text?: string\n    icon?: string\n    url?: string\n  }\n}\n\nexport interface HeroFields {\n  heading?: { value: string }\n  intro?: { content: { content: RichTextNode[] }[] }\n  buttons?: ButtonResource[]\n  icon?: string\n}\n\nexport interface HeroItem {\n  fields?: HeroFields\n}\n\n@customElement(\"proto-dynamic-hero\")\nexport class ProtoDynamicHero extends LitElement {\n  @property({ type: Array }) props?: HeroItem[]\n  @property({ type: Array }) protoButtonHandlers?: ProtoButtonHandler[] // Overrides button behavior for prototype use\n  @property({ type: String }) currentModalEntryId?: string\n  @property({ type: Object }) entryFields?: EntryFields\n  @property({ type: Boolean }) private isLargeScreen = false\n\n  private isParentLarge = false // Parent grids with wider grid-template settings require narrower text fields.\n  private _mediaQuery?: MediaQueryList\n\n  override connectedCallback() {\n    super.connectedCallback()\n\n    this.addEventListener(\"open-dynamic-modal\", async (e: Event) => {\n      await this.openDynamicModal(e as DynamicModal)\n    })\n\n    const parentGrid = this.closest(\"duet-grid\")\n    const gridTemplate = parentGrid?.getAttribute(\"grid-template\")\n\n    if (gridTemplate === \"large\") {\n      this.isParentLarge = true\n      this._mediaQuery = window.matchMedia(\"(min-width: 1220px)\") // Duet media-query-xx-large\n      this.isLargeScreen = this._mediaQuery.matches\n      this._mediaQuery.addEventListener(\"change\", this._onMediaChange)\n    }\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback()\n    this._mediaQuery?.removeEventListener(\"change\", this._onMediaChange)\n  }\n\n  private _onMediaChange = (event: MediaQueryListEvent) => {\n    this.isLargeScreen = event.matches\n  }\n\n  openDynamicModal = async (event: DynamicModal) => {\n    this.currentModalEntryId = event.detail.entryId\n    this.entryFields = event.detail.fields\n\n    await this.updateComplete\n\n    const dynamicModal = document.getElementById(this.currentModalEntryId) as DuetModal\n    dynamicModal?.show()\n  }\n\n  override render() {\n    const fields = this.props?.[0]?.fields\n    const { heading, intro, buttons, icon } = fields ?? {}\n    const introNodes = intro?.content?.[0]?.content ?? []\n\n    return html`\n      <duet-page-heading icon=${icon ?? nothing} layout=\"auto\">\n        ${\n          heading\n            ? html`\n              <duet-heading\n                level=\"h1\"\n                visual-level=${this.isParentLarge ? \"h1\" : \"h2\"}\n                slot=\"heading\"\n                margin=\"none\"\n              >${heading}\n              </duet-heading\n              >`\n            : nothing\n        }\n      </duet-page-heading>\n\n      <!-- Custom content -->\n      <slot name=\"main\"></slot>\n\n      <!-- RichText -->\n      ${introNodes.map(node => {\n        if (node.nodeType === \"text\") {\n          return html`\n            <duet-grid grid-template=${this.isParentLarge && this.isLargeScreen ? \"sidebar-right\" : nothing}>\n              <duet-paragraph>${renderRichText(node)}</duet-paragraph>\n            </duet-grid>\n          `\n        }\n\n        return html`\n          <div>\n            ${unsafeHTML(renderRichText(node))}\n            <duet-spacer size=\"medium\"></duet-spacer>\n          </div>\n        `\n      })}\n\n      <!-- Buttons -->\n      ${\n        buttons?.length\n          ? html`\n            <duet-grid grid-template=\"button-grid\" id=\"dynamichero_buttons\">\n              ${buttons.map(\n                ({ fields }) => html`\n                  <duet-link\n                    id=${fields.key ?? nothing}\n                    icon=${fields.icon ?? nothing}\n                    url=${getLinkUrl({ fields }, this.protoButtonHandlers)}\n                    variation=\"button\"\n                    external=${isUrlExternal(fields.url)}\n                  >\n                    ${fields.text ?? \"\"}\n                  </duet-link>\n                `\n              )}\n            </duet-grid>\n            <duet-spacer size=\"x-large\"></duet-spacer>\n          `\n          : nothing\n      }\n\n      <proto-dynamic-modal\n        .entryFields=${this.entryFields}\n        .currentModalEntryId=${this.currentModalEntryId}\n      ></proto-dynamic-modal>\n    `\n  }\n}\n"]}
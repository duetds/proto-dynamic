{"version":3,"file":"proto-dynamic-hero.js","sourceRoot":"","sources":["../../src/hero/proto-dynamic-hero.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, LitElement, nothing } from \"lit\"\nimport { customElement, property } from \"lit/decorators.js\"\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\"\nimport { getLinkUrl, isUrlExternal, renderRichText } from \"../utils/helper-functions\"\n\nexport interface RichTextNode {\n  nodeType?: string\n  value?: string\n  content?: RichTextNode[]\n  data?: {\n    uri?: string\n    target?: { fields?: Record<string, unknown> }\n  }\n}\n\nexport interface EntryFields {\n  heading?: string\n  icon?: string\n  body?: { content: RichTextNode[] }\n}\n\nexport interface DynamicModalEvent extends CustomEvent {\n  detail: { entryId: string; fields: EntryFields }\n}\n\nexport interface ProtoButtonHandler {\n  buttonId: string\n  url?: string\n  clickHandler?: () => void\n}\n\nexport interface ButtonResource {\n  fields: { key: string; text?: string; icon?: string; url: string }\n}\n\nexport interface HeroFields {\n  heading?: string\n  intro?: { content: RichTextNode[] }\n  buttons?: ButtonResource[]\n  icon?: string\n}\n\nexport interface HeroItem {\n  fields?: HeroFields\n}\n\n@customElement(\"proto-dynamic-hero\")\nexport class ProtoDynamicHero extends LitElement {\n  @property({ type: Array }) props?: HeroItem[]\n  @property({ type: Array }) protoButtonHandlers?: ProtoButtonHandler[] // Overrides button behavior for prototype use\n  @property({ type: String }) currentModalEntryId?: string\n  @property({ type: Object }) entryFields?: EntryFields\n  @property({ type: Boolean }) private isLargeScreen = false\n\n  private isParentLarge = false // Parent grids with wider grid-template settings require narrower text fields.\n  private _mediaQuery?: MediaQueryList\n\n  override connectedCallback() {\n    super.connectedCallback()\n\n    this.addEventListener(\"open-dynamic-modal\", async (event: Event) => {\n      await this.openDynamicModal(event as DynamicModalEvent)\n    })\n\n    const parentGrid = this.closest(\"duet-grid\")\n    if (parentGrid?.getAttribute(\"grid-template\") === \"large\") {\n      this.isParentLarge = true\n      this._mediaQuery = window.matchMedia(\"(min-width: 1220px)\") // Duet media-query-xx-large\n      this.isLargeScreen = this._mediaQuery.matches\n      this._mediaQuery.addEventListener(\"change\", this._onMediaChange)\n    }\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback()\n    this._mediaQuery?.removeEventListener(\"change\", this._onMediaChange)\n  }\n\n  private _onMediaChange = (event: MediaQueryListEvent) => {\n    this.isLargeScreen = event.matches\n  }\n\n  openDynamicModal = async (event: DynamicModalEvent) => {\n    this.currentModalEntryId = event.detail.entryId\n    this.entryFields = event.detail.fields\n\n    await this.updateComplete\n\n    const dynamicModal = document.getElementById(this.currentModalEntryId) as HTMLDuetModalElement\n\n    dynamicModal?.show()\n  }\n\n  override render() {\n    const fields = this.props?.[0]?.fields\n    const { heading, intro, buttons, icon } = fields ?? {}\n    const nodes = intro?.content ?? []\n\n    return html`\n      <duet-page-heading icon=${icon ?? nothing} layout=\"auto\">\n        ${\n          heading\n            ? html`\n              <duet-heading\n                level=\"h1\"\n                visual-level=${this.isParentLarge ? \"h1\" : \"h2\"}\n                slot=\"heading\"\n                margin=\"none\"\n              >\n                ${heading}\n              </duet-heading>\n            `\n            : nothing\n        }\n      </duet-page-heading>\n\n      <!-- Custom content -->\n      <slot name=\"main\"></slot>\n\n      <!-- Nodes -->\n      ${nodes.map(node => {\n        let renderedContent = \"\"\n\n        if (node.nodeType === \"paragraph\") {\n          renderedContent = node.content?.map(n => (n.nodeType === \"text\" ? n.value : renderRichText(n))).join(\"\") ?? \"\"\n        } else if (node.nodeType === \"embedded-entry-block\" && node.data?.target?.fields) {\n          renderedContent = renderRichText(node)\n        }\n\n        return html`\n          <duet-grid\n            grid-template=${this.isParentLarge && this.isLargeScreen ? \"sidebar-right\" : nothing}\n          >\n            <duet-paragraph variation=\"intro\">${unsafeHTML(renderedContent)}</duet-paragraph>\n          </duet-grid>\n        `\n      })}\n\n      <!-- Buttons -->\n      ${\n        buttons?.length\n          ? html`\n            <duet-grid\n              grid-template=\"button-grid\"\n              id=\"dynamichero_buttons\"\n            >\n              ${buttons.map(\n                b => html`\n                  <duet-link\n                    id=${b.fields.key ?? nothing}\n                    icon=${b.fields.icon ?? nothing}\n                    url=${getLinkUrl(b, this.protoButtonHandlers)}\n                    variation=\"button\"\n                    external=${isUrlExternal(b.fields.url)}\n                  >\n                    ${b.fields.text ?? \"\"}\n                  </duet-link>\n                `\n              )}\n            </duet-grid>\n\n            <duet-spacer size=\"x-large\"></duet-spacer>\n          `\n          : nothing\n      }\n\n      <proto-dynamic-modal\n        .entryFields=${this.entryFields}\n        .currentModalEntryId=${this.currentModalEntryId}\n      ></proto-dynamic-modal>\n    `\n  }\n}\n"]}